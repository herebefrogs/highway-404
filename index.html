<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{const e=/iPhone|iPad|Android/i.test(navigator.userAgent),t=new(top.AudioContext||webkitAudioContext),a=(e=1,t=.05,a=220,n=0,i=0,o=.1,s=0,l=1,r=0,h=0,m=0,p=0,y=0,c=0,g=0,d=0,w=0,f=1,A=0,u=44100,v=99+n*u,b=i*u,x=o*u,M=A*u,k=w*u,T=2*Math.PI,E=(e=>e>0?1:-1),R=v+M+b+x+k,D=(r*=500*T/u**2),I=(a*=(1+2*t*Math.random()-t)*T/u),K=E(g)*T/4,S=0,P=0,U=0,F=0,H=0,G=0,Y=1,C=[])=>{for(;R>U;C[U++]=G)++H>100*d&&(H=0,G=S*a*Math.sin(P*g*T/u-K),G=E(G=s?s>1?s>2?s>3?Math.sin((G%T)**3):Math.max(Math.min(Math.tan(G),1),-1):1-(2*G/T%2+2)%2:1-4*Math.abs(Math.round(G/T)-G/T):Math.sin(G))*Math.abs(G)**l*e*.3*(v>U?U/v:v+M>U?1-(U-v)/M*(1-f):v+M+b>U?f:R-k>U?(R-U-k)/x*f:0),G=k?G/2+(k>U?0:(R-k>U?1:(U-R)/k)*C[U-k|0]/2):G),S+=1-c+1e9*(Math.sin(U)+1)%2*c,P+=1-c+1e9*(Math.sin(U)**2+1)%2*c,a+=r+=500*h*T/u**3,Y&&++Y>p*u&&(a+=m*T/u,I+=m*T/u,Y=0),y&&++F>y*u&&(a=I,r=D,F=1,Y=Y||1);return C};function n(e,t,a){return 0>a?e:a>1?t:e*(1-a)+t*a}function i(e,t){if(0>=t)return e[0];if(t>=1)return e[e.length-1];const a=Math.floor((e.length-1)*t);return n(e[a],e[Math.ceil((e.length-1)*t)],t*(e.length-1)-a)}const o={},s=(e,t,a="2020.highway-404.")=>localStorage.setItem(a+e,t),l=(e,t="2020.highway-404.")=>localStorage.getItem(t+e);let r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAAFCAMAAABb9gHDAAAAAXNSR0IArs4c6QAAAAZQTFRFAAAA////pdmf3QAAAAJ0Uk5TAP9bkSK1AAAA4ElEQVQ4jXVUCQ6DMAyz///pSZD4KB3TUENLbMcJ4F7QQis/gRaY8FkqxCZArzLB7bbASjbvcnIGrTk3LHRt9OzF0zdHMMbn1mQG83qMibE5V+QfcX4zNsCC2dqZT2FITSQI1SG9lG8Fl0KUVwguqo1UeasXFkMBX8o0LSpBwqV0gknaggnjt9VM+hun66yKbMag/OljCb71MDpkaWDveiaibUKZvfYP5z89tJITvIzOEhyNc7ruEoXr5VKOlzzWkZzcnmEYqI58bFG118ec4URAfjvi3ZvD6oqsGUrmZYh/WxsCHSPC1FwAAAAASUVORK5CYII=";function h(e,t,a,n,i=0,o=1){const s=5*o,l=e.length*(o+s),h=2===i?l:1===i?l/2:0;[...e].forEach((e,i)=>{t.drawImage(r,5*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/#[]UDLRT".indexOf(e),0,5,5,a+i*(s+1)-h,n,s,s)})}const m=[38,38,40,40,37,39,37,39,66,65];let p,y,g,d,w,f,A,u,v,b,x=0,M=0,k=[{time:2.54,lane:1,type:"103",msg:"road not found"},{time:2.54,lane:2,type:"103",msg:"road not found"},{time:2.54,lane:3,type:"103",msg:"road not found"},{time:2.54,lane:4,type:"103",msg:"road not found"},{time:2.54,lane:5,type:"103",msg:"road not found"},{time:2.54,lane:6,type:"103",msg:"road not found"},{time:2.54,lane:7,type:"103",msg:"road not found"},{time:4.5,lane:1,type:"404"},{time:4.5,lane:2,type:"404"},{time:4.5,lane:3,type:"404"},{time:4.5,lane:4,type:"404"},{time:4.5,lane:5,type:"404"},{time:4.5,lane:6,type:"404"},{time:4.5,lane:7,type:"404"},{time:10,lane:1,type:"404"},{time:10,lane:2,type:"404"},{time:10,lane:3,type:"404"},{time:10,lane:4,type:"404"},{time:10,lane:5,type:"404"},{time:10,lane:6,type:"404"},{time:10,lane:7,type:"404"},{time:15,lane:1,type:"200"},{time:15,lane:2,type:"200"},{time:15,lane:3,type:"200"},{time:15,lane:4,type:"200"},{time:15,lane:5,type:"200"},{time:15,lane:6,type:"200"},{time:15,lane:7,type:"200"},{time:18,lane:2,type:"103",msg:"road unavailable"},{time:18,lane:1,type:"103",msg:"road unavailable"},{time:18,lane:3,type:"103",msg:"road unavailable"},{time:18,lane:4,type:"103",msg:"road unavailable"},{time:18,lane:5,type:"103",msg:"road unavailable"},{time:18,lane:6,type:"103",msg:"road unavailable"},{time:18,lane:7,type:"103",msg:"road unavailable"},{time:20,lane:1,type:"503",length:30},{time:20,lane:7,type:"503",length:30},{time:21,lane:2,type:"501",length:20},{time:21,lane:6,type:"501",length:20},{time:24,lane:4,type:"503",length:50},{time:25,lane:3,type:"501",length:10},{time:25,lane:5,type:"501",length:10},{time:27,lane:1,type:"503",length:20},{time:27,lane:7,type:"503",length:20},{time:33,lane:2,type:"103",msg:"lane change"},{time:33,lane:1,type:"103",msg:"lane change"},{time:33,lane:3,type:"103",msg:"lane change"},{time:33,lane:4,type:"103",msg:"lane change"},{time:33,lane:5,type:"103",msg:"lane change"},{time:33,lane:6,type:"103",msg:"lane change"},{time:33,lane:7,type:"103",msg:"lane change"},{time:35,type:"501",lane:4,length:18},{time:35.5,type:"503",lane:3,length:20},{time:35.5,type:"503",lane:5,length:20},{time:36,type:"501",lane:2,length:20},{time:36,type:"501",lane:6,length:20},{time:37,type:"302",lane:1,redirect:3},{time:37,type:"301",lane:7,redirect:-3},{time:37.2,type:"503",lane:1,length:20},{time:37.2,type:"503",lane:7,length:20},{time:40,type:"501",lane:1,length:8},{time:40,type:"501",lane:7,length:8},{time:40.5,type:"503",lane:2,length:20},{time:40.5,type:"503",lane:6,length:20},{time:41,type:"301",lane:3,redirect:-2},{time:41,type:"302",lane:5,redirect:2},{time:41.2,type:"501",lane:3,length:20},{time:41.2,type:"501",lane:5,length:20},{time:42,type:"302",lane:4,redirect:3},{time:42.2,type:"503",lane:4,length:20},{time:48,lane:1,type:"103",msg:"collect teapots"},{time:48,lane:2,type:"103",msg:"collect teapots"},{time:48,lane:3,type:"103",msg:"collect teapots"},{time:48,lane:4,type:"103",msg:"collect teapots"},{time:48,lane:5,type:"103",msg:"collect teapots"},{time:48,lane:6,type:"103",msg:"collect teapots"},{time:48,lane:7,type:"103",msg:"collect teapots"},{time:50,lane:1,type:"418"},{time:50,lane:4,type:"418"},{time:50,lane:7,type:"418"},{time:52,lane:2,type:"418"},{time:52,lane:6,type:"418"},{time:54,lane:1,type:"418"},{time:54,lane:4,type:"418"},{time:54,lane:7,type:"418"},{time:54.5,lane:1,type:"501",length:10},{time:54.5,lane:4,type:"503",length:26},{time:54.5,lane:7,type:"501",length:10},{time:57,lane:2,type:"404"},{time:57,lane:6,type:"404"},{time:57.1,lane:1,type:"404"},{time:57.1,lane:3,type:"404"},{time:57.1,lane:5,type:"404"},{time:57.1,lane:7,type:"404"},{time:57.3,lane:2,type:"418"},{time:57.3,lane:6,type:"418"},{time:60,lane:1,type:"200"},{time:60,lane:2,type:"200"},{time:60,lane:3,type:"200"},{time:60,lane:5,type:"200"},{time:60,lane:6,type:"200"},{time:60,lane:7,type:"200"},{time:62,lane:1,type:"503",length:20},{time:62,lane:3,type:"501",length:20},{time:62,lane:5,type:"501",length:20},{time:62,lane:7,type:"503m",length:20},{time:64,lane:4,type:"418"},{time:68,lane:1,type:"103",msg:"drive safely"},{time:68,lane:2,type:"103",msg:"drive safely"},{time:68,lane:3,type:"103",msg:"drive safely"},{time:68,lane:4,type:"103",msg:"drive safely"},{time:68,lane:5,type:"103",msg:"drive safely"},{time:68,lane:6,type:"103",msg:"drive safely"},{time:68,lane:7,type:"103",msg:"drive safely"},{time:70,lane:1,type:"503",length:36},{time:70,lane:7,type:"503",length:36},{time:70.5,lane:2,type:"501",length:32},{time:70.5,lane:6,type:"501",length:32},{time:71.5,lane:3,type:"404"},{time:71.5,lane:4,type:"404"},{time:71.5,lane:5,type:"404"},{time:75.1,lane:3,type:"200"},{time:75.1,lane:5,type:"200"},{time:75.2,lane:3,type:"501",length:34},{time:75.2,lane:5,type:"503",length:34},{time:76,lane:1,type:"404"},{time:76,lane:2,type:"404"},{time:76,lane:6,type:"404"},{time:76,lane:7,type:"404"},{time:78,lane:4,type:"302",redirect:3},{time:78.2,lane:4,type:"200"},{time:78.3,lane:4,type:"501",length:12},{time:80,lane:1,type:"200"},{time:80,lane:2,type:"200"},{time:80,lane:6,type:"200"},{time:80,lane:7,type:"200"}],T=[[[,0,77,,,.7,2,.41,,,,,,,,.06],[,0,43,.01,,.3,2,,,,,,,,,.02,.01],[,0,170,.003,,.008,,.97,-35,53,,,,,,.1],[.8,0,270,,,.12,3,1.65,-2,,,,,4.5,,.02],[,0,86,,,,,.7,,,,.5,,6.7,1,.05],[,0,41,,.05,.4,2,0,,,9,.01,,,,.08,.02],[,0,2200,,,.04,3,2,,,800,.02,,4.8,,.01,.1],[.3,0,16,,,.3,3]],[[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,22,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,22,,22,,22,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,24,,,,,,,,27,,,,,,,,,,,,,,,,27,,,,24,,,,24,,,,,,,,27,,,,,,,,,,,,,,,,24,,24,,24,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[6,1,,,34,34,34,,,,,,34,34,,,,,34,,,,34,34,,,,,34,,,,34,,,,34,34,34,,,,,,34,,,,,,34,34,,,34,34,,,,,,,,,34,34],[4,1,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,23,23,35,23,23,36,23,23,35,23,23,36,23,23,35,35,23,23,35,23,23,35,23,23,36,23,23,35,23,23,36,36],[5,-1,21,,,19,,,21,,,,,,,,,,21,,,19,,,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[3,1,24,,,24,,,24,,,,,,,,,,24,,,24,,,24,,,,24.75,24.5,24.26,24.01,24.01,24.01,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[4,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,24.5,24.26,24.01,24.01,24.01,24.01,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23,,21,23,,35,,23,,21,23,,35,,35,,23,,21,23,,35,,21,23,,35,,21,23,,,],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,36,34,,33,34,34,36,31,36,34,,31,34,32,,33,36,34,,31,34,34,36,33,36,33,,31,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,21,,19,21,,33,,21,,19,21,,33,,33,,21,,19,21,,33,,21,,19,21,,33,,33,,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29],[2,1,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,],[6,1,,,36,,,,,,36,,36,,,,,,,,36,,,,,,36,,36,,,,,,,,36,,,,,,,,,,,,,,,,36,,,,,,36,,36,,,,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,25,,,25,,,,,,,,25,,,,,,,,25,25,25,25]],[[1,-1,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,19,19,31,19,19,31,19,19,31,19,19,31,19,19,31,31],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,36,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,19,,19,19,31,19,19,31,19,,19,19,31,19,19,31],[2,1,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,,,,,,34,,34,,,,,,,,34,,,,,,34,,34,,,,,,]]],[0,1,1,2,3,4,4],,{title:"Depp",instruments:["Instrument 0","Instrument 1","Instrument 2","Instrument 3","Instrument 4","Instrument 5","Instrument 6","Instrument 7"],patterns:["Pattern 0","Pattern 1","Pattern 2","Pattern 3","Pattern 4"]}];const E=c.getContext("2d"),R=c.cloneNode(),D=R.getContext("2d");R.width=180,R.height=400;const I=c.cloneNode(),K=I.getContext("2d");I.width=120,I.height=160;let S="wasd";const P=I.width-50;let U=0,F=0;const H=[[0,6,6],[1,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[3,5,5,5],[7,4,7]],G={hero:{sprites:[{x:0,y:0,w:10,h:20}],speed:{x:100,y:50}},fallingRoad:{sprites:[{x:40,y:0,w:20,h:20},{x:60,y:0,w:20,h:20},{x:80,y:0,w:20,h:20},{x:100,y:0,w:20,h:20},{x:120,y:0,w:20,h:20},{x:140,y:0,w:20,h:20}]},missingRoad:{sprites:[{x:140,y:0,w:20,h:20}]},highwayPanel:{sprites:[{x:0,y:40,w:R.width,h:40}]},103:{sprites:[{x:140,y:100,w:20,h:20}]},200:{sprites:[{x:120,y:100,w:20,h:20}]},301:{sprites:[{x:0,y:80,w:20,h:20}]},302:{sprites:[{x:20,y:80,w:20,h:20}]},404:{sprites:[{x:40,y:80,w:20,h:20}]},418:{sprites:[{x:60,y:80,w:20,h:20}]},429:{sprites:[{x:80,y:80,w:20,h:20}]},501:{sprites:[{x:100,y:80,w:20,h:20},{x:120,y:80,w:20,h:20}]},503:{sprites:[{x:140,y:80,w:20,h:20}]},highway:{0:[{x:0,y:20,w:20,h:20}],6:[{x:20,y:20,w:20,h:20}],1:[{x:40,y:20,w:20,h:20}],2:[{x:60,y:20,w:20,h:20}],3:[{x:80,y:20,w:20,h:20}],4:[{x:100,y:20,w:20,h:20}],7:[{x:120,y:20,w:20,h:20}],5:[{x:140,y:20,w:20,h:20}],speed:{y:160}}};let Y,C,X,L,V="data:image/png;base64,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",Q=!0;function B(){G.hero.sprites[0].x+=10,k=k.concat([{time:53,type:"429",lane:3},{time:53,type:"429",lane:5},{time:61,type:"429",lane:3},{time:61,type:"429",lane:5}])}function q(){d=[g=j("hero",I.width/2,R.height-50),j("highwayPanel",0,R.height-I.height+15),j("highwayPanel",160,R.height-I.height+15)],U=0,F=R.height-I.height}function W(){x=0,p=404,y=0,distance=0,f=!1,(()=>{const e=k.map(e=>({...e,distance:e.time*G.highway.speed.y}));w=[],e.forEach(e=>{switch(w.push(j(e.type,20*e.lane,-e.distance+F,"501"===e.type)),e.type){case"103":w[w.length-1].msg=e.msg;break;case"301":case"302":w[w.length-1].redirect=e.redirect;break;case"501":case"503":for(let t=1;e.length>=t;t++)w.push(j("missingRoad",20*e.lane,-e.distance-20*t+F))}}),d=w.concat(d)})(),M=1,$()}function z(e,t){return t.x+t.w>e.x+e.w/4&&e.x+3*e.w/4>t.x&&t.y+t.h>e.y+e.h/4&&e.y+3*e.h/4>t.y}function j(e,t=0,a=0,n=!1){if(G[e]){const i=G[e].sprites[0];return{frame:0,frameTime:0,h:i.h,loopAnimation:n,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,moveX:0,moveY:0,rotate:0,scale:1,speed:G[e].speed,sprites:G[e].sprites,type:e,w:i.w,x:t,y:a}}return{h:20,type:e,w:20,x:t,y:a}}function N(e){const t=j("fallingRoad",e.x,e.y-e.h);return t.spawn=N,t.spawnTime=p,t}function O(e){if(e.frameTime+=C,e.frameTime>.1&&(e.frameTime-=.1,(e.sprites.length-1>e.frame||e.loopAnimation)&&(e.frame+=1),e.loopAnimation&&(e.frame%=e.sprites.length),e.dying&&(e.rotate+=.7853981633974483,e.scale-=.1,0>e.scale&&(e.scale=0,e.dying=!1,e.dead=!0))),g.speedTime&&g.speedTime-p>5&&(g.speedTime=0),e.translateTo){const t=(e.translateTime-p)/e.translateDuration;e.x=n(e.translateFrom,e.translateTo,t),e.scale=i([1,1.2,1.6,1.75,1.6,1.25,1],t),t>1&&(e.translateTo=e.translateFrom=e.translateTime=e.translateDuration=void 0)}else if(e.speed&&!e.dying){const t=e.moveX&&e.moveY?.7071067811865476:1;e.x+=e.speed.x*C*e.moveX*t,e.y+=e.speed.y*C*e.moveY*t}}function J(){return 10*Math.floor(404-p)+418*y}function Z(){const e=l("highscore")||13,t=Math.max(e,J());s("highscore",t),s("OS13kTrophy,ðŸ…,Highway 404,Highscore",t,"")}function $(){var e;_(),1===M&&(e=T,b=((...e)=>{let a=t.createBufferSource(),n=t.createBuffer(e.length,e[0].length,44100);return e.map((e,t)=>n.getChannelData(t).set(e)),a.buffer=n,a.connect(t.destination),a.start(),a})(...e),b.loop=!0)}function _(){b&&(b.stop(),b=null)}function ee(){E.drawImage(I,0,0,I.width,I.height,0,0,c.width,c.height)}function te(e){if(e.y>=F-40)if(e.sprites){const t=e.sprites[e.frame];K.save(),K.translate(Math.round(e.x-U),Math.round(e.y-F));let a=0,n=0;if(e.dying)K.translate(Math.round(e.w/2),Math.round(e.h/2)),K.rotate(e.rotate),a=-e.w/2*e.scale,n=-e.h/2*e.scale;else if(e.translateTo||e.moveX){const t=e.translateTo?e.translateTo-e.translateFrom>0?1:-1:e.moveX;K.translate(Math.round(e.w/2),Math.round(e.h/2)),K.rotate(.19634954084936207*t),a=-e.w/2*e.scale,n=-e.h/2*e.scale}switch(K.drawImage(V,t.x,t.y,t.w,t.h,a,n,t.w*e.scale,t.h*e.scale),K.restore(),e.type){case"103":case"200":case"301":case"302":case"404":case"418":case"429":case"501":case"503":h(e.type,K,Math.round(e.x+10-U),Math.round(e.y+e.h+1-2.5-F),1)}}else h(e.type,K,Math.round(e.x+10-U),Math.round(e.y+e.h/2-2.5-F),1)}function ae(){Q&&(L=requestAnimationFrame(ae),(()=>{switch(K.drawImage(R,U,F,I.width,I.height,0,0,I.width,I.height),d.forEach(te),M){case 0:h("js13kgames 2020",K,I.width/2,5,1),h("collect teapots",K,I.width/2,I.height/2-10,1),h("for extra points",K,I.width/2,I.height/2-2,1),h(e?"swipe to steer":S+"/ULDR to steer",K,I.width/2,I.height/2+15,1),h("jerome lecomte",K,I.width/2,I.height-10,1);break;case 1:h("score",K,5,5),h(""+J(),K,I.width-5,5,2),(()=>{const e=Math.floor(Math.ceil(p)/60),t=Math.ceil(p)-60*e;h(`time ${e}:${t>9?"":"0"}${t}`,K,5,I.height-10)})(),h("teapot "+y,K,I.width-5,I.height-10,2),g.speedTime&&h(5-Math.floor(g.speedTime-p)+" sec",K,I.width/2,I.height/2,1),u&&h(A,K,I.width/2,I.height/2,1);break;case 2:h("score",K,5,15),h(""+J(),K,I.width-5,15,2),h("highscore",K,5,5),h(l("highscore"),K,I.width-5,5,2),h(f?"you arrived!":"you got lost!",K,I.width/2,I.height/2-3,1),e||h("[t]weet your score",K,I.width/2,I.height-20,1),h(e?"tap to restart":"[space] to restart",K,I.width/2,I.height-10,1)}ee()})(),Y=Date.now(),C=(Y-X)/1e3,(()=>{switch(M){case 1:p-=C,0>p&&(f=!0,Z(),_(),M=2),g.dead&&(f=!1,Z(),_(),M=2),u-p>3&&(u=0),console.log(g.moveX,g.moveLeft,g.moveRight,g.moveY,g.moveUp,g.moveDown),g.moveX=g.moveLeft+g.moveRight,g.moveY=g.moveUp+g.moveDown,d.forEach(O),(()=>{let e;const t=G.highway.speed.y;e=g.dying?n(t,0,(g.dyingTime-p)/1.5):n(0,t,(404-p)/1.5),g.speedTime&&(e=i([1,.25,.25,.25,.25,1].map(e=>t*e),(g.speedTime-p)/5)),F-=e*C,g.y-=e*C,0>F&&(F+=R.height-I.height,d.forEach(e=>{e.y+=R.height-I.height}))})(),20>(e=g).x?e.x=20:e.x>R.width-20-e.w&&(e.x=R.width-20-e.w),F+20>e.y?e.y=F+20:e.y>F+I.height-e.h&&(e.y=F+I.height-e.h),U>0&&U+50>g.x?U=Math.max(0,g.x-50):R.width-I.width>U&&g.x+g.w>U+P&&(U=Math.min(R.width-I.width,g.x+g.w-P)),w=[];const t=new Set;(()=>{const e=d.filter(e=>"200"===e.type);d.forEach(t=>{if(t.spawn&&t.spawnTime-p>.1){const a=t.spawn(t);w.push(a),t.spawn=null,e.forEach(e=>{z(a,e)&&w.pop()})}})})();let a=!1;g.translateTo||(d.forEach(e=>{if(e!==g&&!e.triggered&&z(g,e))switch(e.triggered=!0,e.type){case"103":u=p,A=e.msg;break;case"200":t.add("road OK");break;case"301":case"302":t.add("301"===e.type?"lane moved":"temporary lane redirect"),g.translateFrom=g.x,g.translateTo=g.x+20*e.redirect,g.translateTime=p,g.translateDuration=Math.abs(.25*e.redirect);break;case"404":w.push(N({x:e.x,y:e.y+20,h:e.h})),t.add("road not found");break;case"418":y++,t.add("extra points");break;case"429":t.add("speed limiting"),g.speedTime=p;break;case"501":t.add("road not implemented");break;case"503":t.add("road unavailable");break;case"fallingRoad":e.triggered=!1,g.dying||g.dead||(g.scale=1-.1*(e.frame+1),a=!0),e.frame>e.sprites.length/2&&(e.triggered=!0,g.dying||(g.dying=!0,g.dyingTime=p));break;case"missingRoad":g.dying||(g.dying=!0,g.dyingTime=p)}}),a||g.dying||g.dead||(g.scale=1)),d=w.concat(d),t.forEach(e=>v(e)),d=d.filter(e=>F+I.height+20>e.y)}var e})(),X=Y)}function ne(e){Q=e,Q?(X=Date.now(),ae()):cancelAnimationFrame(L)}function ie(e){return new Promise(t=>{var a=new Image;a.onload=()=>{t(a)},a.src=e})}onload=async()=>{document.title="Highway 404",onresize(),await(async e=>{r=await e(r)})(ie),V=await ie(V),h("loading...",K,I.width/2,I.height/2,1),ee(),v=await(async()=>{let e=(await new Promise((e,t)=>{let a=0,n=setInterval(()=>{a+=1,speechSynthesis.getVoices().length?(e(speechSynthesis.getVoices()),clearInterval(n)):100>a||(t([]),clearInterval(n))},10)})).filter(e=>navigator.language===e.lang||RegExp("^"+navigator.language.split("-")[0]).test(e.lang));if(e.length){const n=(t=e)[(a=t.length-1,Math.floor(Math.random()*(a+1-0)+0))];return e=>{const t=o[e]||(o[e]=new SpeechSynthesisUtterance(e));t.voice=n,speechSynthesis.speak(t)}}var t,a;return()=>{}})(),[T]=[T].map(e=>((e,t,n,i=125)=>{let o,s,l,r,h,m,p,y,c,g,d,w,f,A,u,v,b=[],x=[],M=[],k=0,T=1,E={},R=44100/i*60>>2;for(;T;k++)b=[T=y=d=f=0],n.map((i,d)=>{for(p=t[i][k]||[0,0,0],T|=!!t[i][k],u=f+(t[i][0].length-2-!y)*R,s=2,r=f;p.length+(d==n.length-1)>s;y=++s){for(h=p[s],c=g!=(p[0]||0)|h|0,l=0;R>l&&y;l++>R-99&&c?w+=(1>w)/99:0)m=(1-w)*b[A++]/2||0,x[r]=(x[r]||0)+m*v-m,M[r]=(M[r++]||0)+m*v+m;h&&(w=h%1,v=p[1]||0,(h|=0)&&(b=E[[g=p[A=0]||0,h]]=E[[g,h]]||(o=[...e[g]],o[2]*=2**((h-12)/12),a(...o))))}f=u});return[x,M]})(...e)),q(),H.forEach((e,t)=>{let a=R.height;for(;a>0;)e.forEach(e=>{const n=G.highway[e][0];a-=n.h,D.drawImage(V,n.x,n.y,n.w,n.h,t*n.w,a,n.w,n.h)})}),(e=>{function t(){document.monetization.removeEventListener("monetizationstart",t),e()}document.monetization&&("started"===document.monetization.state?t():"pending"===document.monetization.state&&document.monetization.addEventListener("monetizationstart",t))})(B),/^fr/i.test(navigator.language)&&(S="zqsd"),ne(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/I.width,innerHeight/I.height);c.width=I.width*e,c.height=I.height*e,E.imageSmoothingEnabled=D.imageSmoothingEnabled=K.imageSmoothingEnabled=!1},document.onvisibilitychange=e=>{ne(!e.target.hidden),Q?$():_()},onkeydown=e=>{if(e.preventDefault(),!e.repeat)switch(M){case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":g.moveLeft=-1;break;case"ArrowUp":case"KeyW":case"KeyZ":g.moveUp=-1;break;case"ArrowRight":case"KeyD":g.moveRight=1;break;case"ArrowDown":case"KeyS":g.moveDown=1;break;case"KeyP":ne(!Q)}}},onkeyup=e=>{switch(M){case 0:e.which!==m[x]||10===x?W():(x++,10===x&&B());break;case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":g.moveLeft=0;break;case"ArrowRight":case"KeyD":g.moveRight=0;break;case"ArrowUp":case"KeyW":case"KeyZ":g.moveUp=0;break;case"ArrowDown":case"KeyS":g.moveDown=0}break;case 2:switch(e.code){case"KeyT":open(`https://twitter.com/intent/tweet?text=I%20survived%20${Math.floor(404-p)}%20seconds${y>0?" and collected "+y+" teapot"+(y>1?"s":""):""}%20in%20Highway%20404%20by%20%40herebefrogs%20for%20%23js13k%202020%0Ahttps%3A%2F%2Fbit.ly%2Fhgw-404`,"_blank");break;default:q(),M=0}}};let oe=0,se=0,le=0,re=0;function he(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}ontouchstart=onpointerdown=e=>{switch(e.preventDefault(),M){case 1:[le,re]=[oe,se]=he(e)}},ontouchmove=onpointermove=e=>{switch(e.preventDefault(),M){case 1:oe&&se&&(([e,t])=>{e>le?(le=e,g.moveRight=n(0,1,(le-oe)/30)):oe>e?(oe=e,g.moveLeft=-n(0,1,(le-oe)/30)):le>e&&g.moveX>0?(oe=e,g.moveRight=0):e>oe&&0>g.moveX&&(le=e,g.moveLeft=0),t>re?(re=t,g.moveDown=n(0,1,(re-se)/30)):se>t?(se=t,g.moveUp=-n(0,1,(re-se)/30)):re>t&&g.moveY>0?(se=t,g.moveDown=0):t>se&&0>g.moveY&&(re=t,g.moveUp=0)})(he(e))}},ontouchend=onpointerup=e=>{switch(e.preventDefault(),M){case 0:W();break;case 1:g.moveLeft=g.moveRight=g.moveDown=g.moveUp=0,oe=se=le=re=0;break;case 2:q(),M=0}}})();</script>