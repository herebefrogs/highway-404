<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><style>body{margin:0;text-align:center;background:#000}body,canvas{touch-action:none;user-select:none}</style><canvas id=c></canvas><script>(()=>{const e=/iPhone|iPad|Android/i.test(navigator.userAgent),t=new(top.AudioContext||webkitAudioContext),a=(e=1,t=.05,a=220,n=0,i=0,m=.1,l=0,s=1,o=0,y=0,p=0,h=0,g=0,r=0,d=0,c=0,w=0,u=1,f=0,v=44100,A=99+n*v,b=i*v,x=m*v,k=f*v,E=w*v,M=2*Math.PI,R=(e=>e>0?1:-1),I=A+k+b+x+E,T=(o*=500*M/v**2),F=(a*=(1+2*t*Math.random()-t)*M/v),D=R(d)*M/4,S=0,P=0,X=0,N=0,C=0,Q=0,L=1,H=[])=>{for(;I>X;H[X++]=Q)++C>100*c&&(C=0,Q=S*a*Math.sin(P*d*M/v-D),Q=R(Q=l?l>1?l>2?l>3?Math.sin((Q%M)**3):Math.max(Math.min(Math.tan(Q),1),-1):1-(2*Q/M%2+2)%2:1-4*Math.abs(Math.round(Q/M)-Q/M):Math.sin(Q))*Math.abs(Q)**s*e*.3*(A>X?X/A:A+k>X?1-(X-A)/k*(1-u):A+k+b>X?u:I-E>X?(I-X-E)/x*u:0),Q=E?Q/2+(E>X?0:(I-E>X?1:(X-I)/E)*H[X-E|0]/2):Q),S+=1-r+1e9*(Math.sin(X)+1)%2*r,P+=1-r+1e9*(Math.sin(X)**2+1)%2*r,a+=o+=500*y*M/v**3,L&&++L>h*v&&(a+=p*M/v,F+=p*M/v,L=0),g&&++N>g*v&&(a=F,o=T,N=1,L=L||1);return H};function n(e,t,a){return 0>a?e:a>1?t:e*(1-a)+t*a}function i(e,t){if(0>=t)return e[0];if(t>=1)return e[e.length-1];const a=Math.floor((e.length-1)*t);return n(e[a],e[Math.ceil((e.length-1)*t)],t*(e.length-1)-a)}const m={},l=(e,t,a="2020.highway-404.")=>localStorage.setItem(a+e,t),s=(e,t="2020.highway-404.")=>localStorage.getItem(t+e);let o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAAAFCAMAAACU/WIpAAAAAXNSR0IArs4c6QAAAAZQTFRFAAAA////pdmf3QAAAAJ0Uk5TAP9bkSK1AAAA5UlEQVQ4jXWUCw6AMAhD4f6XNtGVvm5T4wL7UFqY1XpqjLE8U2PUcl9z3FKASosBboOAJ9g62ysm0lr7VhbzyHvXMPvFQMZ1DMA9ePX1wEA0tpjuD02fxEJ1wEhF5xMYwwsBwB8ihAbSUilA6PI4eCM0FNKx6A+hjdNf8u0EewIQmCK0kSmRwmtX9CeJyDdfMsQc63b0djC6dQIsNjzZdK76xqCVwNH191v7x7qa0w4exacYWzPtnWCx2AmbkrzD+AFoKaS06ywNGVuOUmlfq7a860Qo/mNw9lZ1yd1Ur5JwFjbVfACz9wIlA1aBbAAAAABJRU5ErkJggg==";function y(e,t,a,n,i=0,m=1){const l=5*m,s=e.length*(m+l),y=2===i?s:1===i?s/2:0;[...e].forEach((e,i)=>{t.drawImage(o,5*"abcdefghijklmnopqrstuvwxyz0123456789.:!-%,/#[]UDLR?'".indexOf(e),0,5,5,a+i*(l+1)-y,n,l,l)})}const p=[38,38,40,40,37,39,37,39,66,65];let h,g,r,d,w,u,f,v,A,b,x=0,k=0,E=.1,M=[{time:0,lane:7,type:"418"},{time:2.54,lane:1,type:"103",msg:"road not found"},{time:2.54,lane:2,type:"103",msg:"road not found"},{time:2.54,lane:3,type:"103",msg:"road not found"},{time:2.54,lane:4,type:"103",msg:"road not found"},{time:2.54,lane:5,type:"103",msg:"road not found"},{time:2.54,lane:6,type:"103",msg:"road not found"},{time:2.54,lane:7,type:"103",msg:"road not found"},{time:4.5,lane:1,type:"404"},{time:4.5,lane:2,type:"404"},{time:4.5,lane:3,type:"404"},{time:4.5,lane:4,type:"404"},{time:4.5,lane:5,type:"404"},{time:4.5,lane:6,type:"404"},{time:4.5,lane:7,type:"404"},{time:10,lane:1,type:"404"},{time:10,lane:2,type:"404"},{time:10,lane:3,type:"404"},{time:10,lane:4,type:"404"},{time:10,lane:5,type:"404"},{time:10,lane:6,type:"404"},{time:10,lane:7,type:"404"},{time:15,lane:1,type:"200"},{time:15,lane:2,type:"200"},{time:15,lane:3,type:"200"},{time:15,lane:4,type:"200"},{time:15,lane:5,type:"200"},{time:15,lane:6,type:"200"},{time:15,lane:7,type:"200"},{time:18,lane:2,type:"103",msg:"road unavailable"},{time:18,lane:1,type:"103",msg:"road unavailable"},{time:18,lane:3,type:"103",msg:"road unavailable"},{time:18,lane:4,type:"103",msg:"road unavailable"},{time:18,lane:5,type:"103",msg:"road unavailable"},{time:18,lane:6,type:"103",msg:"road unavailable"},{time:18,lane:7,type:"103",msg:"road unavailable"},{time:20,lane:1,type:"503",length:30},{time:20,lane:7,type:"503",length:30},{time:21,lane:2,type:"501",length:20},{time:21,lane:6,type:"501",length:20},{time:24,lane:4,type:"503",length:50},{time:25,lane:3,type:"501",length:10},{time:25,lane:5,type:"501",length:10},{time:27,lane:1,type:"503",length:20},{time:27,lane:7,type:"503",length:20},{time:33,lane:2,type:"103",msg:"lane change"},{time:33,lane:1,type:"103",msg:"lane change"},{time:33,lane:3,type:"103",msg:"lane change"},{time:33,lane:4,type:"103",msg:"lane change"},{time:33,lane:5,type:"103",msg:"lane change"},{time:33,lane:6,type:"103",msg:"lane change"},{time:33,lane:7,type:"103",msg:"lane change"},{time:35,type:"501",lane:4,length:18},{time:35.5,type:"503",lane:3,length:20},{time:35.5,type:"503",lane:5,length:20},{time:36,type:"501",lane:2,length:20},{time:36,type:"501",lane:6,length:20},{time:37,type:"302",lane:1,redirect:3},{time:37,type:"301",lane:7,redirect:-3},{time:37.2,type:"503",lane:1,length:20},{time:37.2,type:"503",lane:7,length:20},{time:40,type:"501",lane:1,length:8},{time:40,type:"501",lane:7,length:8},{time:40.5,type:"503",lane:2,length:20},{time:40.5,type:"503",lane:6,length:20},{time:41,type:"301",lane:3,redirect:-2},{time:41,type:"302",lane:5,redirect:2},{time:41.2,type:"501",lane:3,length:20},{time:41.2,type:"501",lane:5,length:20},{time:42,type:"302",lane:4,redirect:3},{time:42.2,type:"503",lane:4,length:20},{time:48,lane:1,type:"103",msg:"collect teapots"},{time:48,lane:2,type:"103",msg:"collect teapots"},{time:48,lane:3,type:"103",msg:"collect teapots"},{time:48,lane:4,type:"103",msg:"collect teapots"},{time:48,lane:5,type:"103",msg:"collect teapots"},{time:48,lane:6,type:"103",msg:"collect teapots"},{time:48,lane:7,type:"103",msg:"collect teapots"},{time:50,lane:1,type:"418"},{time:50,lane:4,type:"418"},{time:50,lane:7,type:"418"},{time:52,lane:2,type:"418"},{time:52,lane:6,type:"418"},{time:54,lane:1,type:"418"},{time:54,lane:4,type:"418"},{time:54,lane:7,type:"418"},{time:54.5,lane:1,type:"501",length:10},{time:54.5,lane:4,type:"503",length:26},{time:54.5,lane:7,type:"501",length:10},{time:57,lane:2,type:"404"},{time:57,lane:6,type:"404"},{time:57.1,lane:1,type:"404"},{time:57.1,lane:3,type:"404"},{time:57.1,lane:5,type:"404"},{time:57.1,lane:7,type:"404"},{time:57.3,lane:2,type:"418"},{time:57.3,lane:6,type:"418"},{time:60,lane:1,type:"200"},{time:60,lane:2,type:"200"},{time:60,lane:3,type:"200"},{time:60,lane:5,type:"200"},{time:60,lane:6,type:"200"},{time:60,lane:7,type:"200"},{time:62,lane:1,type:"503",length:20},{time:62,lane:3,type:"501",length:20},{time:62,lane:5,type:"501",length:20},{time:62,lane:7,type:"503",length:20},{time:64,lane:4,type:"418"},{time:68,lane:1,type:"103",msg:"drive safely"},{time:68,lane:2,type:"103",msg:"drive safely"},{time:68,lane:3,type:"103",msg:"drive safely"},{time:68,lane:4,type:"103",msg:"drive safely"},{time:68,lane:5,type:"103",msg:"drive safely"},{time:68,lane:6,type:"103",msg:"drive safely"},{time:68,lane:7,type:"103",msg:"drive safely"},{time:70,lane:1,type:"503",length:36},{time:70,lane:7,type:"503",length:36},{time:70.5,lane:2,type:"501",length:32},{time:70.5,lane:6,type:"501",length:32},{time:71.5,lane:3,type:"404"},{time:71.5,lane:4,type:"404"},{time:71.5,lane:5,type:"404"},{time:75,lane:3,type:"200"},{time:75,lane:5,type:"200"},{time:75.2,lane:3,type:"501",length:34},{time:75.2,lane:5,type:"503",length:34},{time:75.4,lane:4,type:"418"},{time:75.6,lane:1,type:"404"},{time:75.6,lane:2,type:"404"},{time:75.6,lane:6,type:"404"},{time:75.6,lane:7,type:"404"},{time:77.6,lane:1,type:"200"},{time:77.6,lane:2,type:"200"},{time:77.6,lane:6,type:"200"},{time:77.6,lane:7,type:"200"},{time:78,lane:4,type:"302",redirect:3},{time:78.2,lane:4,type:"200"},{time:78.4,lane:4,type:"501",length:12},{time:83,lane:1,type:"103",msg:"drive sober"},{time:83,lane:2,type:"103",msg:"drive sober"},{time:83,lane:3,type:"103",msg:"drive sober"},{time:83,lane:4,type:"103",msg:"drive sober"},{time:83,lane:5,type:"103",msg:"drive sober"},{time:83,lane:6,type:"103",msg:"drive sober"},{time:83,lane:7,type:"103",msg:"drive sober"},{time:85,lane:1,type:"503",length:16},{time:85,lane:3,type:"503",length:16},{time:85,lane:5,type:"503",length:16},{time:85,lane:7,type:"503",length:48},{time:86.8,lane:2,type:"302",redirect:3},{time:86.8,lane:4,type:"301",redirect:-3},{time:86.8,lane:6,type:"301",redirect:-3},{time:87,lane:2,type:"501",length:16},{time:87,lane:4,type:"501",length:16},{time:87,lane:6,type:"501",length:16},{time:88.8,lane:1,type:"302",redirect:3},{time:88.8,lane:3,type:"302",redirect:3},{time:88.8,lane:5,type:"301",redirect:-3},{time:89,lane:1,type:"503",length:48},{time:89,lane:3,type:"503",length:16},{time:89,lane:5,type:"503",length:16},{time:90.8,lane:2,type:"302",redirect:3},{time:90.8,lane:4,type:"302",redirect:3},{time:90.8,lane:6,type:"301",redirect:-3},{time:91,lane:2,type:"501",length:16},{time:91,lane:4,type:"501",length:16},{time:91,lane:6,type:"501",length:16},{time:92.8,lane:3,type:"302",redirect:3},{time:92.8,lane:5,type:"301",redirect:-3},{time:92.8,lane:7,type:"301",redirect:-3},{time:93,lane:3,type:"503",length:16},{time:93,lane:5,type:"503",length:16},{time:93,lane:7,type:"503",length:16},{time:94.9,lane:4,type:"418"},{time:100,lane:1,type:"103",msg:"you found my secret!"},{time:100,lane:2,type:"103",msg:"you found my secret!"},{time:100,lane:3,type:"103",msg:"you found my secret!"},{time:100,lane:4,type:"103",msg:"you found my secret!"},{time:100,lane:5,type:"103",msg:"you found my secret!"},{time:100,lane:6,type:"103",msg:"you found my secret!"},{time:100,lane:7,type:"103",msg:"you found my secret!"},{time:102,lane:1,type:"103",msg:"i ran out of time"},{time:102,lane:2,type:"103",msg:"i ran out of time"},{time:102,lane:3,type:"103",msg:"i ran out of time"},{time:102,lane:4,type:"103",msg:"i ran out of time"},{time:102,lane:5,type:"103",msg:"i ran out of time"},{time:102,lane:6,type:"103",msg:"i ran out of time"},{time:102,lane:7,type:"103",msg:"i ran out of time"},{time:104,lane:1,type:"103",msg:"to add more levels."},{time:104,lane:2,type:"103",msg:"to add more levels."},{time:104,lane:3,type:"103",msg:"to add more levels."},{time:104,lane:4,type:"103",msg:"to add more levels."},{time:104,lane:5,type:"103",msg:"to add more levels."},{time:104,lane:6,type:"103",msg:"to add more levels."},{time:104,lane:7,type:"103",msg:"to add more levels."},{time:108,lane:1,type:"103",msg:"thanks for playing,"},{time:108,lane:2,type:"103",msg:"thanks for playing,"},{time:108,lane:3,type:"103",msg:"thanks for playing,"},{time:108,lane:4,type:"103",msg:"thanks for playing,"},{time:108,lane:5,type:"103",msg:"thanks for playing,"},{time:108,lane:6,type:"103",msg:"thanks for playing,"},{time:108,lane:7,type:"103",msg:"thanks for playing,"},{time:110,lane:1,type:"103",msg:"and making it"},{time:110,lane:2,type:"103",msg:"and making it"},{time:110,lane:3,type:"103",msg:"and making it"},{time:110,lane:4,type:"103",msg:"and making it"},{time:110,lane:5,type:"103",msg:"and making it"},{time:110,lane:6,type:"103",msg:"and making it"},{time:110,lane:7,type:"103",msg:"and making it"},{time:112,lane:1,type:"103",msg:"that far alive."},{time:112,lane:2,type:"103",msg:"that far alive."},{time:112,lane:3,type:"103",msg:"that far alive."},{time:112,lane:4,type:"103",msg:"that far alive."},{time:112,lane:5,type:"103",msg:"that far alive."},{time:112,lane:6,type:"103",msg:"that far alive."},{time:112,lane:7,type:"103",msg:"that far alive."},{time:116,lane:1,type:"103",msg:"safe road ahead"},{time:116,lane:2,type:"103",msg:"safe road ahead"},{time:116,lane:3,type:"103",msg:"safe road ahead"},{time:116,lane:4,type:"103",msg:"safe road ahead"},{time:116,lane:5,type:"103",msg:"safe road ahead"},{time:116,lane:6,type:"103",msg:"safe road ahead"},{time:116,lane:7,type:"103",msg:"safe road ahead"},{time:118,lane:1,type:"103",msg:"till the end"},{time:118,lane:2,type:"103",msg:"till the end"},{time:118,lane:3,type:"103",msg:"till the end"},{time:118,lane:4,type:"103",msg:"till the end"},{time:118,lane:5,type:"103",msg:"till the end"},{time:118,lane:6,type:"103",msg:"till the end"},{time:118,lane:7,type:"103",msg:"till the end"},{time:120,lane:1,type:"103",msg:"of the line."},{time:120,lane:2,type:"103",msg:"of the line."},{time:120,lane:3,type:"103",msg:"of the line."},{time:120,lane:4,type:"103",msg:"of the line."},{time:120,lane:5,type:"103",msg:"of the line."},{time:120,lane:6,type:"103",msg:"of the line."},{time:120,lane:7,type:"103",msg:"of the line."},{time:150,lane:1,type:"103",msg:"enjoying the ride?"},{time:150,lane:2,type:"103",msg:"enjoying the ride?"},{time:150,lane:3,type:"103",msg:"enjoying the ride?"},{time:150,lane:4,type:"103",msg:"enjoying the ride?"},{time:150,lane:5,type:"103",msg:"enjoying the ride?"},{time:150,lane:6,type:"103",msg:"enjoying the ride?"},{time:150,lane:7,type:"103",msg:"enjoying the ride?"},{time:200,lane:1,type:"103",msg:"still driving, eh?"},{time:200,lane:2,type:"103",msg:"still driving, eh?"},{time:200,lane:3,type:"103",msg:"still driving, eh?"},{time:200,lane:4,type:"103",msg:"still driving, eh?"},{time:200,lane:5,type:"103",msg:"still driving, eh?"},{time:200,lane:6,type:"103",msg:"still driving, eh?"},{time:200,lane:7,type:"103",msg:"still driving, eh?"},{time:250,lane:1,type:"103",msg:"shouldn't you be"},{time:250,lane:2,type:"103",msg:"shouldn't you be"},{time:250,lane:3,type:"103",msg:"shouldn't you be"},{time:250,lane:4,type:"103",msg:"shouldn't you be"},{time:250,lane:5,type:"103",msg:"shouldn't you be"},{time:250,lane:6,type:"103",msg:"shouldn't you be"},{time:250,lane:7,type:"103",msg:"shouldn't you be"},{time:252,lane:1,type:"103",msg:"working,"},{time:252,lane:2,type:"103",msg:"working,"},{time:252,lane:3,type:"103",msg:"working,"},{time:252,lane:4,type:"103",msg:"working,"},{time:252,lane:5,type:"103",msg:"working,"},{time:252,lane:6,type:"103",msg:"working,"},{time:252,lane:7,type:"103",msg:"working,"},{time:254,lane:1,type:"103",msg:"or whatever?"},{time:254,lane:2,type:"103",msg:"or whatever?"},{time:254,lane:3,type:"103",msg:"or whatever?"},{time:254,lane:4,type:"103",msg:"or whatever?"},{time:254,lane:5,type:"103",msg:"or whatever?"},{time:254,lane:6,type:"103",msg:"or whatever?"},{time:254,lane:7,type:"103",msg:"or whatever?"},{time:300,lane:1,type:"103",msg:"you must really"},{time:300,lane:2,type:"103",msg:"you must really"},{time:300,lane:3,type:"103",msg:"you must really"},{time:300,lane:4,type:"103",msg:"you must really"},{time:300,lane:5,type:"103",msg:"you must really"},{time:300,lane:6,type:"103",msg:"you must really"},{time:300,lane:7,type:"103",msg:"you must really"},{time:302,lane:1,type:"103",msg:"want to see"},{time:302,lane:2,type:"103",msg:"want to see"},{time:302,lane:3,type:"103",msg:"want to see"},{time:302,lane:4,type:"103",msg:"want to see"},{time:302,lane:5,type:"103",msg:"want to see"},{time:302,lane:6,type:"103",msg:"want to see"},{time:302,lane:7,type:"103",msg:"want to see"},{time:304,lane:1,type:"103",msg:"the end."},{time:304,lane:2,type:"103",msg:"the end."},{time:304,lane:3,type:"103",msg:"the end."},{time:304,lane:4,type:"103",msg:"the end."},{time:304,lane:5,type:"103",msg:"the end."},{time:304,lane:6,type:"103",msg:"the end."},{time:304,lane:7,type:"103",msg:"the end."},{time:350,lane:1,type:"103",msg:"you don't quit,"},{time:350,lane:2,type:"103",msg:"you don't quit,"},{time:350,lane:3,type:"103",msg:"you don't quit,"},{time:350,lane:4,type:"103",msg:"you don't quit,"},{time:350,lane:5,type:"103",msg:"you don't quit,"},{time:350,lane:6,type:"103",msg:"you don't quit,"},{time:350,lane:7,type:"103",msg:"you don't quit,"},{time:352,lane:1,type:"103",msg:"do you?"},{time:352,lane:2,type:"103",msg:"do you?"},{time:352,lane:3,type:"103",msg:"do you?"},{time:352,lane:4,type:"103",msg:"do you?"},{time:352,lane:5,type:"103",msg:"do you?"},{time:352,lane:6,type:"103",msg:"do you?"},{time:352,lane:7,type:"103",msg:"do you?"},{time:388,lane:1,type:"103",msg:"wait! what if..."},{time:388,lane:2,type:"103",msg:"wait! what if..."},{time:388,lane:3,type:"103",msg:"wait! what if..."},{time:388,lane:4,type:"103",msg:"wait! what if..."},{time:388,lane:5,type:"103",msg:"wait! what if..."},{time:388,lane:6,type:"103",msg:"wait! what if..."},{time:388,lane:7,type:"103",msg:"wait! what if..."},{time:390,lane:1,type:"103",msg:"there is no cake?"},{time:390,lane:2,type:"103",msg:"there is no cake?"},{time:390,lane:3,type:"103",msg:"there is no cake?"},{time:390,lane:4,type:"103",msg:"there is no cake?"},{time:390,lane:5,type:"103",msg:"there is no cake?"},{time:390,lane:6,type:"103",msg:"there is no cake?"},{time:390,lane:7,type:"103",msg:"there is no cake?"},{time:394,lane:1,type:"103",msg:"think about it."},{time:394,lane:2,type:"103",msg:"think about it."},{time:394,lane:3,type:"103",msg:"think about it."},{time:394,lane:4,type:"103",msg:"think about it."},{time:394,lane:5,type:"103",msg:"think about it."},{time:394,lane:6,type:"103",msg:"think about it."},{time:394,lane:7,type:"103",msg:"think about it."},{time:396,lane:1,type:"103",msg:"no, really."},{time:396,lane:2,type:"103",msg:"no, really."},{time:396,lane:3,type:"103",msg:"no, really."},{time:396,lane:4,type:"103",msg:"no, really."},{time:396,lane:5,type:"103",msg:"no, really."},{time:396,lane:6,type:"103",msg:"no, really."},{time:396,lane:7,type:"103",msg:"no, really."},{time:401,lane:1,type:"418"},{time:401,lane:2,type:"418"},{time:401,lane:3,type:"418"},{time:401,lane:4,type:"418"},{time:401,lane:5,type:"418"},{time:401,lane:6,type:"418"},{time:401,lane:7,type:"418"}],R=[[[,0,77,,,.7,2,.41,,,,,,,,.06],[,0,43,.01,,.3,2,,,,,,,,,.02,.01],[,0,170,.003,,.008,,.97,-35,53,,,,,,.1],[.8,0,270,,,.12,3,1.65,-2,,,,,4.5,,.02],[,0,86,,,,,.7,,,,.5,,6.7,1,.05],[,0,41,,.05,.4,2,0,,,9,.01,,,,.08,.02],[,0,2200,,,.04,3,2,,,800,.02,,4.8,,.01,.1],[.3,0,16,,,.3,3]],[[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,22,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,22,,22,,22,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,24,,,,,,,,27,,,,,,,,,,,,,,,,27,,,,24,,,,24,,,,,,,,27,,,,,,,,,,,,,,,,24,,24,,24,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[6,1,,,34,34,34,,,,,,34,34,,,,,34,,,,34,34,,,,,34,,,,34,,,,34,34,34,,,,,,34,,,,,,34,34,,,34,34,,,,,,,,,34,34],[4,1,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,23,23,35,23,23,36,23,23,35,23,23,36,23,23,35,35,23,23,35,23,23,35,23,23,36,23,23,35,23,23,36,36],[5,-1,21,,,19,,,21,,,,,,,,,,21,,,19,,,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[3,1,24,,,24,,,24,,,,,,,,,,24,,,24,,,24,,,,24.75,24.5,24.26,24.01,24.01,24.01,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[4,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,24.5,24.26,24.01,24.01,24.01,24.01,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23,,21,23,,35,,23,,21,23,,35,,35,,23,,21,23,,35,,21,23,,35,,21,23,,,],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,36,34,,33,34,34,36,31,36,34,,31,34,32,,33,36,34,,31,34,34,36,33,36,33,,31,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,21,,19,21,,33,,21,,19,21,,33,,33,,21,,19,21,,33,,21,,19,21,,33,,33,,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29],[2,1,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,],[6,1,,,36,,,,,,36,,36,,,,,,,,36,,,,,,36,,36,,,,,,,,36,,,,,,,,,,,,,,,,36,,,,,,36,,36,,,,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,25,,,25,,,,,,,,25,,,,,,,,25,25,25,25]],[[1,-1,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,19,19,31,19,19,31,19,19,31,19,19,31,19,19,31,31],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,36,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,19,,19,19,31,19,19,31,19,,19,19,31,19,19,31],[2,1,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,,,,,,34,,34,,,,,,,,34,,,,,,34,,34,,,,,,]]],[0,1,1,2,3,4,4],,{title:"Depp",instruments:["Instrument 0","Instrument 1","Instrument 2","Instrument 3","Instrument 4","Instrument 5","Instrument 6","Instrument 7"],patterns:["Pattern 0","Pattern 1","Pattern 2","Pattern 3","Pattern 4"]}];const I=c.getContext("2d"),T=c.cloneNode(),F=T.getContext("2d");T.width=180,T.height=400;const D=c.cloneNode(),S=D.getContext("2d");D.width=120,D.height=160;let P="wasd";const X=D.width-50;let N=0,C=0;const Q=[[0,6,6],[1,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[2,5,5,5],[3,5,5,5],[7,4,7]],L={hero:{sprites:[{x:0,y:0,w:10,h:20}],speed:{x:100,y:50}},fallingRoad:{sprites:[{x:40,y:0,w:20,h:20},{x:60,y:0,w:20,h:20},{x:80,y:0,w:20,h:20},{x:100,y:0,w:20,h:20},{x:120,y:0,w:20,h:20},{x:140,y:0,w:20,h:20}]},missingRoad:{sprites:[{x:140,y:0,w:20,h:20}]},highwayPanel:{sprites:[{x:0,y:40,w:T.width,h:40}]},103:{sprites:[{x:140,y:100,w:20,h:20}]},200:{sprites:[{x:120,y:100,w:20,h:20}]},301:{sprites:[{x:0,y:80,w:20,h:20}]},302:{sprites:[{x:20,y:80,w:20,h:20}]},404:{sprites:[{x:40,y:80,w:20,h:20}]},418:{sprites:[{x:60,y:80,w:20,h:20}]},429:{sprites:[{x:80,y:80,w:20,h:20}]},501:{sprites:[{x:100,y:80,w:20,h:20},{x:120,y:80,w:20,h:20}]},503:{sprites:[{x:140,y:80,w:20,h:20}]},highway:{0:[{x:0,y:20,w:20,h:20}],6:[{x:20,y:20,w:20,h:20}],1:[{x:40,y:20,w:20,h:20}],2:[{x:60,y:20,w:20,h:20}],3:[{x:80,y:20,w:20,h:20}],4:[{x:100,y:20,w:20,h:20}],7:[{x:120,y:20,w:20,h:20}],5:[{x:140,y:20,w:20,h:20}],speed:{y:160}}};let H,q,Z,z,K=.1,V="data:image/png;base64,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",B=!0;function U(){L.hero.sprites[0].x+=10,M=M.concat([{time:53,lane:3,type:"429"},{time:53,lane:5,type:"429"},{time:61,lane:3,type:"429"},{time:61,lane:5,type:"429"},{time:74.5,lane:3,type:"429"},{time:74.5,lane:5,type:"429"}])}function j(){d=[r=W("hero",D.width/2,T.height-50),W("highwayPanel",0,T.height-D.height+15),W("highwayPanel",160,T.height-D.height+15)],N=0,C=T.height-D.height}function O(){x=0,h=404,g=0,distance=0,u=!1,(()=>{const e=M.map(e=>({...e,distance:e.time*L.highway.speed.y}));w=[],e.forEach(e=>{switch(w.push(W(e.type,20*e.lane,-e.distance+C,"501"===e.type)),e.type){case"103":w[w.length-1].msg=e.msg;break;case"301":case"302":w[w.length-1].redirect=e.redirect;break;case"501":case"503":for(let t=1;e.length>=t;t++)w.push(W("missingRoad",20*e.lane,-e.distance-20*t+C))}}),d=w.concat(d)})(),k=1,ee()}function J(e,t){return t.x+t.w>e.x+e.w/4&&e.x+3*e.w/4>t.x&&t.y+t.h>e.y+e.h/4&&e.y+3*e.h/4>t.y}function W(e,t=0,a=0,n=!1){if(L[e]){const i=L[e].sprites[0];return{frame:0,frameTime:0,h:i.h,loopAnimation:n,moveDown:0,moveLeft:0,moveRight:0,moveUp:0,moveX:0,moveY:0,rotate:0,scale:1,speed:L[e].speed,sprites:L[e].sprites,type:e,w:i.w,x:t,y:a}}return{h:20,type:e,w:20,x:t,y:a}}function Y(e){const t=W("fallingRoad",e.x,e.y-e.h);return t.spawn=Y,t.spawnTime=h,t}function G(e){if(e.frameTime+=q,e.frameTime>K&&(e.frameTime-=K,(e.sprites.length-1>e.frame||e.loopAnimation)&&(e.frame+=1),e.loopAnimation&&(e.frame%=e.sprites.length),e.dying&&(e.rotate+=.7853981633974483,e.scale-=.1,0>e.scale&&(e.scale=0,e.dying=!1,e.dead=!0))),r.speedTime&&r.speedTime-h>5&&(r.speedTime=0,E=.1,K=.1),e.translateTo){const t=(e.translateTime-h)/e.translateDuration;e.x=n(e.translateFrom,e.translateTo,t),e.scale=i([1,1.2,1.6,1.75,1.6,1.25,1],t),t>1&&(e.translateTo=e.translateFrom=e.translateTime=e.translateDuration=void 0)}else if(e.speed&&!e.dying){const t=e.moveX&&e.moveY?.7071067811865476:1;e.x+=e.speed.x*q*e.moveX*t,e.y+=e.speed.y*q*e.moveY*t}}function $(){return 10*Math.floor(404-h)+418*g}function _(){const e=s("highscore")||13,t=Math.max(e,$());l("highscore",t),l("OS13kTrophy,ðŸ…,Highway 404,Highscore",t,"")}function ee(){var e;te(),1===k&&(e=R,b=((...e)=>{let a=t.createBufferSource(),n=t.createBuffer(e.length,e[0].length,44100);return e.map((e,t)=>n.getChannelData(t).set(e)),a.buffer=n,a.connect(t.destination),a.start(),a})(...e),b.loop=!0)}function te(){b&&(b.stop(),b=null)}function ae(){I.drawImage(D,0,0,D.width,D.height,0,0,c.width,c.height)}function ne(e){if(e.y>=C-40)if(e.sprites){const t=e.sprites[e.frame];S.save(),S.translate(Math.round(e.x-N),Math.round(e.y-C));let a=0,n=0;if(e.dying)S.translate(Math.round(e.w/2),Math.round(e.h/2)),S.rotate(e.rotate),a=-e.w/2*e.scale,n=-e.h/2*e.scale;else if(e.translateTo||e.moveX){const t=e.translateTo?e.translateTo-e.translateFrom>0?1:-1:e.moveX;S.translate(Math.round(e.w/2),Math.round(e.h/2)),S.rotate(.19634954084936207*t),a=-e.w/2*e.scale,n=-e.h/2*e.scale}switch(S.drawImage(V,t.x,t.y,t.w,t.h,a,n,t.w*e.scale,t.h*e.scale),S.restore(),e.type){case"103":case"200":case"301":case"302":case"404":case"418":case"429":case"501":case"503":y(e.type,S,Math.round(e.x+10-N),Math.round(e.y+e.h+1-2.5-C),1)}}else y(e.type,S,Math.round(e.x+10-N),Math.round(e.y+e.h/2-2.5-C),1)}function ie(){B&&(z=requestAnimationFrame(ie),(()=>{switch(S.drawImage(T,N,C,D.width,D.height,0,0,D.width,D.height),d.forEach(ne),k){case 0:y("js13kgames 2020",S,D.width/2,5,1),y("collect teapots",S,D.width/2,D.height/2-10,1),y("for extra points",S,D.width/2,D.height/2-2,1),y(e?"swipe to steer":P+"/ULDR to steer",S,D.width/2,D.height/2+15,1),y("jerome lecomte",S,D.width/2,D.height-10,1);break;case 1:y("score",S,5,5),y(""+$(),S,D.width-5,5,2),(()=>{const e=Math.floor(Math.ceil(h)/60),t=Math.ceil(h)-60*e;y(`time ${e}:${t>9?"":"0"}${t}`,S,5,D.height-10)})(),y("teapot "+g,S,D.width-5,D.height-10,2),r.speedTime&&y(5-Math.floor(r.speedTime-h)+" sec",S,D.width/2,D.height/2,1),v&&y(f,S,D.width/2,D.height/2,1);break;case 2:y("score",S,5,15),y(""+$(),S,D.width-5,15,2),y("highscore",S,5,5),y(s("highscore"),S,D.width-5,5,2),y(u?"you arrived!":"you got lost!",S,D.width/2,D.height/2-3,1),e||y("[t]weet your score",S,D.width/2,D.height-20,1),y(e?"tap to restart":"[space] to restart",S,D.width/2,D.height-10,1)}ae()})(),H=Date.now(),q=(H-Z)/1e3,(()=>{switch(k){case 1:h-=q,0>h&&(u=!0,_(),te(),k=2),r.dead&&(u=!1,_(),te(),k=2),v-h>3&&(v=0),he?(r.moveX=r.moveLeft+r.moveRight,r.moveY=r.moveUp+r.moveDown):(r.moveX=r.moveLeft||r.moveRight?(r.moveLeft>r.moveRight?-1:1)*n(0,1,(H-Math.max(r.moveLeft,r.moveRight))/150):0,r.moveY=r.moveDown||r.moveUp?(r.moveUp>r.moveDown?-1:1)*n(0,1,(H-Math.max(r.moveUp,r.moveDown))/150):0),d.forEach(G),(()=>{let e;const t=L.highway.speed.y;if(e=r.dying?n(t,0,(r.dyingTime-h)/1.5):n(0,t,(404-h)/1.5),r.speedTime){const a=(r.speedTime-h)/5;e=i([1,.25,.25,.25,.25,1].map(e=>t*e),a),E=i([1,4,4,4,4,1].map(e=>.1*e),a),K=i([1,4,4,4,4,1].map(e=>.1*e),a)}C-=e*q,r.y-=e*q,0>C&&(C+=T.height-D.height,d.forEach(e=>{e.y+=T.height-D.height}))})(),20>(e=r).x?e.x=20:e.x>T.width-20-e.w&&(e.x=T.width-20-e.w),C+20>e.y?e.y=C+20:e.y>C+D.height-e.h&&(e.y=C+D.height-e.h),N>0&&N+50>r.x?N=Math.max(0,r.x-50):T.width-D.width>N&&r.x+r.w>N+X&&(N=Math.min(T.width-D.width,r.x+r.w-X)),w=[];const t=new Set;(()=>{const e=d.filter(e=>"200"===e.type);d.forEach(t=>{if(t.spawn&&t.spawnTime-h>E){const a=t.spawn(t);w.push(a),t.spawn=null,e.forEach(e=>{J(a,e)&&w.pop()})}})})();let a=!1;r.translateTo||(d.forEach(e=>{if(e!==r&&!e.triggered&&J(r,e))switch(e.triggered=!0,e.type){case"103":v=h,f=e.msg;break;case"200":t.add("road OK");break;case"301":case"302":t.add("301"===e.type?"lane moved":"temporary lane redirect"),r.translateFrom=r.x,r.translateTo=r.x+20*e.redirect,r.translateTime=h,r.translateDuration=Math.abs(.25*e.redirect);break;case"404":w.push(Y({x:e.x,y:e.y+20,h:e.h})),t.add("road not found");break;case"418":g++,t.add("extra points");break;case"429":t.add("speed limiting"),r.speedTime=h;break;case"501":t.add("road not implemented");break;case"503":t.add("road unavailable");break;case"fallingRoad":e.triggered=!1,r.dying||r.dead||(r.scale=1-.1*(e.frame+1),a=!0),e.frame>e.sprites.length/2&&(e.triggered=!0,r.dying||(r.dying=!0,r.dyingTime=h));break;case"missingRoad":r.dying||(r.dying=!0,r.dyingTime=h)}}),a||r.dying||r.dead||(r.scale=1)),d=w.concat(d),t.forEach(e=>A(e)),d=d.filter(e=>C+D.height+20>e.y)}var e})(),Z=H)}function me(e){B=e,B?(Z=Date.now(),ie()):cancelAnimationFrame(z)}function le(e){return new Promise(t=>{var a=new Image;a.onload=()=>{t(a)},a.src=e})}onload=async()=>{document.title="Highway 404",onresize(),await(async e=>{o=await e(o)})(le),V=await le(V),y("loading...",S,D.width/2,D.height/2,1),ae(),A=await(async()=>{let e=(await new Promise((e,t)=>{let a=0,n=setInterval(()=>{a+=1,speechSynthesis.getVoices().length?(e(speechSynthesis.getVoices()),clearInterval(n)):100>a||(t([]),clearInterval(n))},10)})).filter(e=>navigator.language===e.lang||RegExp("^"+navigator.language.split("-")[0]).test(e.lang));if(e.length){const n=(t=e)[(a=t.length-1,Math.floor(Math.random()*(a+1-0)+0))];return e=>{const t=m[e]||(m[e]=new SpeechSynthesisUtterance(e));t.voice=n,speechSynthesis.speak(t)}}var t,a;return()=>{}})(),[R]=[R].map(e=>((e,t,n,i=125)=>{let m,l,s,o,y,p,h,g,r,d,c,w,u,f,v,A,b=[],x=[],k=[],E=0,M=1,R={},I=44100/i*60>>2;for(;M;E++)b=[M=g=c=u=0],n.map((i,c)=>{for(h=t[i][E]||[0,0,0],M|=!!t[i][E],v=u+(t[i][0].length-2-!g)*I,l=2,o=u;h.length+(c==n.length-1)>l;g=++l){for(y=h[l],r=d!=(h[0]||0)|y|0,s=0;I>s&&g;s++>I-99&&r?w+=(1>w)/99:0)p=(1-w)*b[f++]/2||0,x[o]=(x[o]||0)+p*A-p,k[o]=(k[o++]||0)+p*A+p;y&&(w=y%1,A=h[1]||0,(y|=0)&&(b=R[[d=h[f=0]||0,y]]=R[[d,y]]||(m=[...e[d]],m[2]*=2**((y-12)/12),a(...m))))}u=v});return[x,k]})(...e)),j(),Q.forEach((e,t)=>{let a=T.height;for(;a>0;)e.forEach(e=>{const n=L.highway[e][0];a-=n.h,F.drawImage(V,n.x,n.y,n.w,n.h,t*n.w,a,n.w,n.h)})}),(e=>{function t(){document.monetization.removeEventListener("monetizationstart",t),e()}document.monetization&&("started"===document.monetization.state?t():"pending"===document.monetization.state&&document.monetization.addEventListener("monetizationstart",t))})(U),/^fr/i.test(navigator.language)&&(P="zqsd"),me(!0)},onresize=onrotate=()=>{const e=Math.min(innerWidth/D.width,innerHeight/D.height);c.width=D.width*e,c.height=D.height*e,I.imageSmoothingEnabled=F.imageSmoothingEnabled=S.imageSmoothingEnabled=!1},document.onvisibilitychange=e=>{me(!e.target.hidden),B?ee():te()},onkeydown=e=>{if(e.preventDefault(),!e.repeat)switch(k){case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":r.moveLeft=H;break;case"ArrowUp":case"KeyW":case"KeyZ":r.moveUp=H;break;case"ArrowRight":case"KeyD":r.moveRight=H;break;case"ArrowDown":case"KeyS":r.moveDown=H;break;case"KeyP":me(!B)}}},onkeyup=e=>{switch(k){case 0:e.which!==p[x]||10===x?O():(x++,10===x&&U());break;case 1:switch(e.code){case"ArrowLeft":case"KeyA":case"KeyQ":r.moveRight&&(r.moveRight=H),r.moveLeft=0;break;case"ArrowRight":case"KeyD":r.moveLeft&&(r.moveLeft=H),r.moveRight=0;break;case"ArrowUp":case"KeyW":case"KeyZ":r.moveDown&&(r.moveDown=H),r.moveUp=0;break;case"ArrowDown":case"KeyS":r.moveUp&&(r.moveUp=H),r.moveDown=0}break;case 2:switch(e.code){case"KeyT":open(`https://twitter.com/intent/tweet?text=I%20survived%20${Math.floor(404-h)}%20seconds${g>0?" and collected "+g+" teapot"+(g>1?"s":""):""}%20in%20Highway%20404%20by%20%40herebefrogs%20for%20%23js13k%202020%0Ahttps%3A%2F%2Fbit.ly%2Fhgw-404`,"_blank");break;default:j(),k=0}}};let se=0,oe=0,ye=0,pe=0,he=!1;function ge(e){return[e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY]}ontouchstart=onpointerdown=e=>{switch(e.preventDefault(),k){case 1:he=!0,[ye,pe]=[se,oe]=ge(e)}},ontouchmove=onpointermove=e=>{switch(e.preventDefault(),k){case 1:se&&oe&&(([e,t])=>{e>ye?(ye=e,r.moveRight=n(0,1,(ye-se)/30)):se>e?(se=e,r.moveLeft=-n(0,1,(ye-se)/30)):ye>e&&r.moveX>0?(se=e,r.moveRight=0):e>se&&0>r.moveX&&(ye=e,r.moveLeft=0),t>pe?(pe=t,r.moveDown=n(0,1,(pe-oe)/30)):oe>t?(oe=t,r.moveUp=-n(0,1,(pe-oe)/30)):pe>t&&r.moveY>0?(oe=t,r.moveDown=0):t>oe&&0>r.moveY&&(pe=t,r.moveUp=0)})(ge(e))}},ontouchend=onpointerup=e=>{switch(e.preventDefault(),k){case 0:O();break;case 1:he=!1,r.moveLeft=r.moveRight=r.moveDown=r.moveUp=0,se=oe=ye=pe=0;break;case 2:j(),k=0}}})();</script>